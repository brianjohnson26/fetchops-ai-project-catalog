"use strict";(()=>{var e={};e.id=711,e.ids=[711],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9001:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var r={};o.r(r),o.d(r,{GET:()=>l});var n=o(6751),a=o(1854),i=o(5579),s=o(3267);function p(e){let t=String(e??"");return`"${t.replace(/"/g,'""')}"`}async function l(e){let{searchParams:t}=new URL(e.url),o=t.get("team")??"",r=t.get("owner")??"",n=t.get("tool")??"",a=t.get("q")??"",i=[];o&&i.push({team:o}),r&&i.push({slackHandle:r}),n&&i.push({tools:{some:{tool:{name:n}}}}),a&&i.push({OR:[{title:{contains:a}},{description:{contains:a}},{team:{contains:a}},{slackHandle:{contains:a}},{tools:{some:{tool:{name:{contains:a}}}}}]});let l=i.length?{AND:i}:{};return new Response(["id,title,description,team,ownerName,hoursSavedPerWeek,tools,links,createdAt,updatedAt",...(await s._.project.findMany({where:l,include:{tools:{include:{tool:!0}},links:!0},orderBy:{createdAt:"desc"}})).map(e=>{let t=e.tools.map(e=>e.tool.name).join("; "),o=e.links.map(e=>`${e.type}: ${e.url}`).join("; ");return[p(e.id),p(e.title),p(e.description),p(e.team),p(e.slackHandle),p(e.hoursSavedPerWeek),p(t),p(o),p(e.createdAt.toISOString()),p(e.updatedAt.toISOString())].join(",")})].join("\n"),{headers:{"content-type":"text/csv; charset=utf-8","content-disposition":'attachment; filename="projects.csv"',"cache-control":"no-store"}})}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/export/route",pathname:"/api/export",filename:"route",bundlePath:"app/api/export/route"},resolvedPagePath:"/home/runner/workspace/src/app/api/export/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:m}=c,h="/api/export/route";function g(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},6751:(e,t,o)=>{e.exports=o(517)},3267:(e,t,o)=>{o.d(t,{_:()=>n});let r=require("@prisma/client"),n=global.prisma||new r.PrismaClient({log:["warn","error"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[357],()=>o(9001));module.exports=r})();