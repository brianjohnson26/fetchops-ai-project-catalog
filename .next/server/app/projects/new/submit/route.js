"use strict";(()=>{var e={};e.id=114,e.ids=[114],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2674:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var o={};r.r(o),r.d(o,{POST:()=>l});var a=r(6751),n=r(1854),s=r(5579),i=r(2507),p=r(3267);async function l(e){if(e.cookies.get("admin_session")?.value!=="1"){let t=e.headers.get("x-forwarded-proto")||"https",r=e.headers.get("x-forwarded-host")||e.nextUrl.host,o=`${t}://${r}`;return i.NextResponse.redirect(new URL("/admin?err=signin",o),303)}let t=await e.formData(),r=String(t.get("title")||""),o=String(t.get("description")||""),a=String(t.get("team")||""),n=String(t.get("ownerName")||"").trim().replace(/^@+/,""),s=Number(t.get("hoursSavedPerWeek")||0),l=Array.from(new Set([...t.getAll("toolNames").map(e=>String(e)),...["llms","automation","data","apps","fetch"].flatMap(e=>String(t.get(`other_${e}`)||"").split(",").map(e=>e.trim()).filter(Boolean))])),u=[];for(let e=1;e<=3;e++){let r=String(t.get(`link_url_${e}`)||"").trim(),o=String(t.get(`link_type_${e}`)||"Other").trim()||"Other";r&&u.push({type:o,url:r})}await p._.project.create({data:{title:r,description:o,team:a,slackHandle:n,hoursSavedPerWeek:s,tools:{create:l.map(e=>({tool:{connectOrCreate:{where:{name:e},create:{name:e}}}}))},links:{create:u}}});let d=e.headers.get("x-forwarded-proto")||"https",c=e.headers.get("x-forwarded-host")||e.nextUrl.host,m=`${d}://${c}`;return i.NextResponse.redirect(new URL("/projects/new?ok=1",m),303)}let u=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/projects/new/submit/route",pathname:"/projects/new/submit",filename:"route",bundlePath:"app/projects/new/submit/route"},resolvedPagePath:"/home/runner/workspace/src/app/projects/new/submit/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:m}=u,g="/projects/new/submit/route";function h(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},3267:(e,t,r)=>{r.d(t,{_:()=>a});let o=require("@prisma/client"),a=global.prisma||new o.PrismaClient({log:["warn","error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[357,395],()=>r(2674));module.exports=o})();