(()=>{var e={};e.id=895,e.ids=[895],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9931:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(6394),s(7831),s(5133);var r=s(9193),n=s(1854),a=s(3997),l=s.n(a),o=s(3320),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let c=["",{children:["projects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6394)),"/home/runner/workspace/src/app/projects/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7831)),"/home/runner/workspace/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5133,23)),"next/dist/client/components/not-found-error"]}],d=["/home/runner/workspace/src/app/projects/page.tsx"],m="/projects/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/projects/page",pathname:"/projects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6147:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9388,23)),Promise.resolve().then(s.t.bind(s,1152,23)),Promise.resolve().then(s.t.bind(s,2764,23)),Promise.resolve().then(s.t.bind(s,6894,23)),Promise.resolve().then(s.t.bind(s,3299,23)),Promise.resolve().then(s.t.bind(s,184,23))},483:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1652,23))},1758:()=>{},7831:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,dynamic:()=>l});var r=s(9703);s(5260);var n=s(428),a=s(9871);let l="force-dynamic";function o({children:e}){let t=a.cookies().get("admin_session")?.value==="1";return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{children:[r.jsx("header",{children:(0,r.jsxs)("nav",{className:"mx-auto max-w-5xl px-4 py-3 flex items-center gap-6",children:[r.jsx(n.default,{href:"/",className:"font-semibold",children:"Dashboard"}),r.jsx(n.default,{href:"/projects",children:"Browse"}),r.jsx(n.default,{href:"/experts",children:"Find an expert"}),r.jsx("span",{className:"spacer"}),t?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{href:"/projects/new",className:"add-cta",children:"+ Add Project"}),r.jsx("form",{method:"POST",action:"/admin/logout",style:{marginLeft:8},children:r.jsx("button",{type:"submit",className:"btn-link",children:"Log out"})})]}):r.jsx(n.default,{href:"/admin",children:"Log in"})]})}),r.jsx("main",{children:e})]})})}},6394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(9703),n=s(3267);let a=e=>(Array.isArray(e)?e[0]:e)||"";async function l({searchParams:e}){let t=a(e?.team),s=a(e?.owner),l=a(e?.tool),o=a(e?.q),i=[];t&&i.push({team:t}),s&&i.push({slackHandle:s}),l&&i.push({tools:{some:{tool:{name:l}}}}),o&&i.push({OR:[{title:{contains:o}},{description:{contains:o}},{team:{contains:o}},{slackHandle:{contains:o}},{tools:{some:{tool:{name:{contains:o}}}}}]});let c=i.length?{AND:i}:{},[d,m,p,u]=await Promise.all([n._.project.findMany({where:c,include:{tools:{include:{tool:!0}}},orderBy:{createdAt:"desc"}}),n._.project.findMany({select:{team:!0},distinct:["team"]}),n._.project.findMany({select:{slackHandle:!0},distinct:["slackHandle"]}),n._.tool.findMany({orderBy:{name:"asc"}})]),x=m.map(e=>e.team).filter(Boolean).sort(),h=p.map(e=>e.slackHandle).filter(Boolean).sort(),j=u.map(e=>e.name),f=new URLSearchParams;o&&f.set("q",o),t&&f.set("team",t),s&&f.set("owner",s),l&&f.set("tool",l);let g=`/api/export${f.toString()?`?${f.toString()}`:""}`;return(0,r.jsxs)("div",{className:"grid",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Browse Projects"}),(0,r.jsxs)("form",{method:"GET",className:"card grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[(0,r.jsxs)("label",{children:["Keyword",r.jsx("input",{name:"q",defaultValue:o,placeholder:"Search title/description/tools…"})]}),(0,r.jsxs)("label",{children:["Team",(0,r.jsxs)("select",{name:"team",defaultValue:t,children:[r.jsx("option",{value:"",children:"All"}),x.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("label",{children:["Owner",(0,r.jsxs)("select",{name:"owner",defaultValue:s,children:[r.jsx("option",{value:"",children:"All"}),h.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("label",{children:["Tool",(0,r.jsxs)("select",{name:"tool",defaultValue:l,children:[r.jsx("option",{value:"",children:"All"}),j.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8,marginTop:8},children:[r.jsx("button",{type:"submit",children:"Apply"}),r.jsx("a",{href:"/projects",className:"btn-linklike",children:"Clear"}),r.jsx("a",{href:g,className:"btn-linklike",style:{marginLeft:"auto"},children:"Download CSV"})]})]}),r.jsx("ul",{className:"grid",children:d.map(e=>(0,r.jsxs)("li",{className:"card",children:[r.jsx("a",{href:`/projects/${e.id}`,className:"text-blue-700 font-medium",children:e.title}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.team," • Owner ",e.slackHandle]}),(0,r.jsxs)("div",{className:"text-sm mt-1",children:["Tools: ",e.tools.map(e=>e.tool.name).join(", ")||"—"]}),(0,r.jsxs)("div",{className:"text-sm mt-1",children:["Hours saved/week: ",e.hoursSavedPerWeek]})]},e.id))})]})}},3267:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});let r=require("@prisma/client"),n=global.prisma||new r.PrismaClient({log:["warn","error"]})},5260:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[357,422],()=>s(9931));module.exports=r})();