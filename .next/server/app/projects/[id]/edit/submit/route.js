"use strict";(()=>{var e={};e.id=151,e.ids=[151],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2865:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>c,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{POST:()=>p});var i=r(6751),o=r(1854),s=r(5579),n=r(2507),d=r(3267);async function p(e,{params:t}){if(e.cookies.get("admin_session")?.value!=="1"){let t=e.headers.get("x-forwarded-proto")||"https",r=e.headers.get("x-forwarded-host")||e.nextUrl.host,a=`${t}://${r}`;return n.NextResponse.redirect(new URL("/admin?err=signin",a),303)}let r=Number(t.id),a=await e.formData(),i=String(a.get("title")||""),o=String(a.get("description")||""),s=String(a.get("team")||""),p=String(a.get("ownerName")||"").trim().replace(/^@+/,""),l=Number(a.get("hoursSavedPerWeek")||0),u=Array.from(new Set([...a.getAll("toolNames").map(e=>String(e)),...["llms","automation","data","apps","fetch"].flatMap(e=>String(a.get(`other_${e}`)||"").split(",").map(e=>e.trim()).filter(Boolean))])),m=[];for(let e=1;e<=3;e++){let t=String(a.get(`link_url_${e}`)||"").trim(),r=String(a.get(`link_type_${e}`)||"Other").trim()||"Other";t&&m.push({type:r,url:t})}await d._.project.update({where:{id:r},data:{title:i,description:o,team:s,slackHandle:p,hoursSavedPerWeek:l,tools:{deleteMany:{},create:u.map(e=>({tool:{connectOrCreate:{where:{name:e},create:{name:e}}}}))},links:{deleteMany:{},create:m}}});let c=e.headers.get("x-forwarded-proto")||"https",g=e.headers.get("x-forwarded-host")||e.nextUrl.host,h=`${c}://${g}`;return n.NextResponse.redirect(new URL(`/projects/${r}?ok=1`,h),303)}let l=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/projects/[id]/edit/submit/route",pathname:"/projects/[id]/edit/submit",filename:"route",bundlePath:"app/projects/[id]/edit/submit/route"},resolvedPagePath:"/home/runner/workspace/src/app/projects/[id]/edit/submit/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:m,serverHooks:c}=l,g="/projects/[id]/edit/submit/route";function h(){return(0,s.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:m})}},3267:(e,t,r)=>{r.d(t,{_:()=>i});let a=require("@prisma/client"),i=global.prisma||new a.PrismaClient({log:["warn","error"]})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[357,395],()=>r(2865));module.exports=a})();